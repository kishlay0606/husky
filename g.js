let order =
{
    "restaurantOrder": {
        "uuid": "0a09ff3b-d083-4b6f-937c-9a447b31d1c2",
        "displayId": "1D1C2",
        "items": [
            {
                "title": "Chicken Wrap Sandwich Locó",
                "uuid": "1916b4a9-7f3f-4941-9ffd-000efa2ecf2e",
                "price": 849,
                "quantity": 1,
                "customizations": [

                ]
            }
        ],
        "checkoutInfo": [
            {
                "value": "$8.49",
                "rawValue": 8.49,
                "key": "subtotal"
            },
            {
                "value": "$0.59",
                "rawValue": 0.59,
                "key": "tax"
            },
            {
                "value": "$9.08",
                "rawValue": 9.08,
                "key": "total"
            }
        ],
        "customerInfo": {
            "firstName": "Peter",
            "lastName": "G.",
            "phone": "+1 312-766-6835",
            "mobileCountryIso2": "US",
            "requestDevice": "iphone",
            "appVersion": "1.277.10004",
            "phonePinCode": "746 78 837",
            "uuid": "488a96cc-7d27-4c84-ab88-360f144ef04d"
        },
        "preparationTime": 1612315800000,
        "isScheduledOrder": true,
        "foodPreparationState": "SENT_TO_KITCHEN",
        "deliveryLocation": {
            "latitude": 0,
            "longitude": 0
        },
        "createdAt": 1612312490244,
        "marketplaceCharges": [
            {
                "value": "$1.49",
                "rawValue": 1.49,
                "key": "booking_fee"
            }
        ],
        "itemsV2": [
            {
                "uuid": "1916b4a9-7f3f-4941-9ffd-000efa2ecf2e",
                "title": "Chicken Wrap Sandwich Locó",
                "price": 849,
                "quantity": 1,
                "customizations": {
                    "elements": [

                    ]
                },
                "externalID": "Loco_Chicken"
            }
        ],
        "fulfillmentType": "DELIVERY",
        "deliveryInstructions": "Do not enter the building. Let me know when you have arrived.",
        "shoppingCart": {
            "items": [
                {
                    "shoppingCartItemUUID": "a761cd72-4da2-48b1-92e8-0af93beaca57",
                    "skuUUID": "1916b4a9-7f3f-4941-9ffd-000efa2ecf2e",
                    "sectionUUID": "274034df-7935-4a28-8ee2-9c9c72ed9071",
                    "subsectionUUID": "9e764e7e-f2fa-482a-a6c0-7d320ee6335d",
                    "quantity": 1,
                    "title": "Chicken Wrap Sandwich Locó",
                    "price": 849,
                    "imageURL": "https://d1ralsognjng37.cloudfront.net/b578062b-78ce-4a98-9f66-e880b4a18ce5.jpeg",
                    "staticSubsectionUUID": "9e764e7e-f2fa-482a-a6c0-7d320ee6335d",
                    "consumerUUID": "488a96cc-7d27-4c84-ab88-360f144ef04d"
                }
            ],
            "serializedTrackingCodes": "[\"{\\\"uuid\\\":\\\"9805f3eb-fc83-4216-9fd2-2f2345f8e41f\\\",\\\"codeType\\\":\\\"STORE\\\",\\\"metaInfo\\\":{\\\"pluginName\\\":\\\"SuggestedCart\\\",\\\"analyticsLabel\\\":\\\"SuggestedCart\\\"},\\\"storePayload\\\":{\\\"storeUUID\\\":\\\"73578038-5c31-40c0-bcf5-389bf81e2287\\\"}}\"]",
            "isSingleUseItemsIncluded": true,
            "itemMenuSections": {
                "130a7e8c-3659-44ff-aa44-c101a4ccab49": {
                    "sectionUUID": "130a7e8c-3659-44ff-aa44-c101a4ccab49",
                    "title": "Dinners"
                },
                "274034df-7935-4a28-8ee2-9c9c72ed9071": {
                    "sectionUUID": "274034df-7935-4a28-8ee2-9c9c72ed9071",
                    "title": "Menu"
                },
                "9e764e7e-f2fa-482a-a6c0-7d320ee6335d": {
                    "sectionUUID": "9e764e7e-f2fa-482a-a6c0-7d320ee6335d",
                    "title": "Wraps \u0026 Rolls"
                },
                "c7a2f41e-b1aa-43d5-8428-f5743c302b8d": {
                    "sectionUUID": "c7a2f41e-b1aa-43d5-8428-f5743c302b8d",
                    "title": "Appetizers"
                }
            },
            "fulfillmentIssues": [

            ]
        },
        "isCurbside": true,
        "largeOrderInfo": {
            "isLargeOrder": false
        },
        "fareInfo": {
            "priceBreakdowns": {
                "a761cd72-4da2-48b1-92e8-0af93beaca57": {
                    "instanceUUID": "a761cd72-4da2-48b1-92e8-0af93beaca57",
                    "unitPrice": {
                        "value": {
                            "amountE5": {
                                "high": 0,
                                "low": 849000,
                                "unsigned": false
                            },
                            "currencyCode": "USD"
                        },
                        "formattedValue": "$8.49"
                    },
                    "calculatedPrice": {
                        "value": {
                            "amountE5": {
                                "high": 0,
                                "low": 849000,
                                "unsigned": false
                            },
                            "currencyCode": "USD"
                        },
                        "formattedValue": "$8.49"
                    },
                    "exclusiveTaxes": {
                        "value": {
                            "amountE5": {
                                "high": 0,
                                "low": 59000,
                                "unsigned": false
                            },
                            "currencyCode": "USD"
                        },
                        "formattedValue": "$0.59"
                    },
                    "baseUnitPrice": {
                        "value": {
                            "amountE5": {
                                "high": 0,
                                "low": 849000,
                                "unsigned": false
                            },
                            "currencyCode": "USD"
                        },
                        "formattedValue": "$8.49"
                    },
                    "baseCalculatedPrice": {
                        "value": {
                            "amountE5": {
                                "high": 0,
                                "low": 849000,
                                "unsigned": false
                            },
                            "currencyCode": "USD"
                        },
                        "formattedValue": "$8.49"
                    },
                    "price": {
                        "amountE5": {
                            "high": 0,
                            "low": 849000,
                            "unsigned": false
                        },
                        "currencyCode": "USD"
                    },
                    "formattedPrice": "$8.49",
                    "tax": {
                        "amountE5": {
                            "high": 0,
                            "low": 59000,
                            "unsigned": false
                        },
                        "currencyCode": "USD"
                    },
                    "formattedTax": "$0.59"
                }
            },
            "checkoutInfo": [
                {
                    "value": "$8.49",
                    "rawValue": 8.49,
                    "key": "subtotal"
                },
                {
                    "value": "$0.59",
                    "rawValue": 0.59,
                    "key": "tax"
                },
                {
                    "value": "$9.08",
                    "rawValue": 9.08,
                    "key": "total"
                }
            ]
        },
        "interactionType": "curbside",
        "customerInfos": [
            {
                "firstName": "Peter",
                "lastName": "Gray",
                "phone": "17816904984",
                "uuid": "488a96cc-7d27-4c84-ab88-360f144ef04d"
            }
        ]
    },
    "estimatedTimes": {
        "workflowUUID": "0a09ff3b-d083-4b6f-937c-9a447b31d1c2",
        "estimatedDeliveryTime": 1612315800000,
        "estimatedPickupTime": 1612314033976,
        "hasCourierBeenWithinPrepTime": false,
        "timeFromRestaurantToEaterSeconds": 0,
        "distanceFromRestaurantToEater": 0,
        "isETDUpdatedByRestaurant": false
    },
    "status": {
        "workflowUUID": "0a09ff3b-d083-4b6f-937c-9a447b31d1c2",
        "orderJob": {
            "uuid": "8b44b293-ef1f-53cb-bae8-437a02e2b12d",
            "currentState": {
                "type": "SCHEDULED_ORDER_ACCEPTED",
                "timeStarted": 1612312501292
            },
            "hasPrepTimeUpdated": false,
            "stateChanges": [
                {
                    "type": "SCHEDULED_ORDER_CREATED",
                    "timeStarted": 1612312490244
                },
                {
                    "type": "SCHEDULED_ORDER_ACCEPTED",
                    "timeStarted": 1612312501292
                }
            ]
        },
        "rushJob": {
            "uuid": "b6b4138f-8942-4054-bd0f-78ab6a171f7a"
        }
    },
    "deliveryJobDetails": [
        {
            "deliveryJobUUID": "b6b4138f-8942-4054-bd0f-78ab6a171f7a",
            "jobStateSummary": {
                "uuid": "b6b4138f-8942-4054-bd0f-78ab6a171f7a"
            }
        }
    ]
}


async function transform() {
    items = [];
    console.log(order.restaurantOrder)
    let charges = order.restaurantOrder.checkoutInfo;
    let state = order.status.orderJob.stateChanges;
    let order_status;
    for (key in state) {
        if (state[key].type == "SCHEDULED_ORDER_ACCEPTED")
            order_status = "scheduled_order"
        if (state[key].type == "CREATED")
            order_status = "active"
        else if (state[key].type == "ACCEPTED")
            order_status = "confirmed";

        else if (state[key].type == "READY_FOR_PICKUP")
            order_status = "ready";
        else if (order.deliveryJobDetails[0].jobStateSummary.currentState)
            order_status = order.deliveryJobDetails[0].jobStateSummary.currentState.type;


    }
    let total_charge, tax, subtotal;
    for (key in charges) {
        if (charges[key].key == "total");
        total_charge = charges[key].value
        if (charges[key].key == "tax")
            tax = charges[key].value
        if (charges[key].key == "subtotal")
            subtotal = charges[key].value
    }

    for (let i = 0; i < order.restaurantOrder.items.length; i++) {
        let item = {
            item_id: order.restaurantOrder.items[i].uuid,//done
            item_name: order.restaurantOrder.items[i].title,
            item_price: Number(order.restaurantOrder.items[i].price),
            item_quantity: order.restaurantOrder.items[i].quantity
        }
        items.push(item);
    }
    let orders = {
        item: items,
        order_id: order.restaurantOrder.displayId,//done
        customer_name: order.restaurantOrder.customerInfo.firstName,//done
        customer_phone: order.restaurantOrder.customerInfo.phone,//done
        sub_total_charges: subtotal,//done
        total_tax: tax,//done
        total_charges: total_charge,//done
        // let item_id = order.restaurantOrder.items[0].uuid;
        // let item_name = order.restaurantOrder.items[0].title;//line.length
        // let item_price = Number(order.restaurantOrder.items[0].price);//ITEMS.LENGTH
        // let item_quantity = order.restaurantOrder.items[0].quantity;
        note: order.restaurantOrder.deliveryInstructions,//todo:to check if note is there
        status: order_status,//PICKED_UP_FOOD//change
        // delivery_person_name: order.deliveryJobDetails[0].courierInfo.courier.name,//done
        // delivery_person_phone: order.deliveryJobDetails[0].courierInfo.courier.mobileDigits,//done
        placed_time: order.restaurantOrder.createdAt,//timestamp value//tod:convert into commontype
        order_count: order.restaurantOrder.items.length,//done
        platform_name: "Uber-eats",//done
        // est_delivery: order.deliveryJobDetails[0].estimatedTimes.estimatedDeliveryTime//timestamp://todo convert into common time
    }
    let transformed_data = [orders];
    // let c=this.transform(order);
    console.log(transformed_data);
    return transformed_data;
}
transform();
// let delivery_status=order.deliveryJobDetails[0].jobStateSummary.currentState.type



                                            // left={Restaurant_Name,platform_name,}
                                            // Order Page:
                                            // OrderID+
                                            // Customer_Name+
                                            // Restaurant_Name-
                                            // Item_Name+
                                            // Note-//add customisation in orders-
                                            // Status-
                                            // Platform_Name-
                                            // No. of items-

                                            // OrderInfo Page:
                                            // Courier Tab-
                                            // Platform_Name
                                            // Delivery guy name-
                                            // Delivery guy phone no.
                                            // Status
                                            // Customer Tab-
                                            // Customer_Name
                                            // Customer_PhoneNo-
                                            // Address if available//add customer address
                                            // Right Column:
                                            // No. of items -
                                            // Customer Name+
                                            // Items_Name+
                                            // Item_price+
                                            // Item_Quantity-
                                            // Note-
                                            // Subtotal+
                                            // Tax+
                                            // Total+
                                            // Platform name+
                                            // Order_ID+
                                            // Placed On-//add order_time in order-
                                            // Status
                                            // Collapse

                                            // gkc/getOrders----all order info with filters and pagination;

                                            // gkc/getOrderDetails----all order info with filters and pagination;


                                            // gkc/confirm;---to confirm order;

                                            // gkc/pickup_ready;---to make orders ready for pickup;


                                            // gkc/completed;----for completed orders;











                                            // let grubhub_item = [item_id, item_name, item_price, item_quantity, grubhub_orders[0].order_number];
